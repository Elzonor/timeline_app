<p id="notice"><%= notice %></p>

<h1><%= @timeline.name %></h1>

<div class="events">
  <h2>Events</h2>
  
  <% if @timeline.events.any? %>
    <table>
      <thead>
        <tr>
          <th>#</th>
          <th>Name</th>
          <th>Description</th>
          <th colspan="3"></th>
        </tr>
      </thead>

      <tbody>
        <% total_events = @timeline.events.count %>
        <% @timeline.events.order(created_at: :desc).each.with_index do |event, index| %>
          <tr>
            <td><%= total_events - index %></td>
            <td><%= link_to event.name, timeline_event_path(@timeline, event) %></td>
            <td><%= event.description %></td>
            <td><%= link_to edit_timeline_event_path(@timeline, event), class: 'icon-link icon-edit' do %>
              <i class="fas fa-edit"></i>
            <% end %></td>
            <td><%= link_to timeline_event_path(@timeline, event), 
                    method: :delete,
                    class: 'icon-link icon-delete',
                    data: { confirm: 'Are you sure?' } do %>
              <i class="fas fa-trash"></i>
            <% end %></td>
          </tr>
        <% end %>
      </tbody>
    </table>
  <% else %>
    <p>No events yet.</p>
  <% end %>

  <p>
    <%= link_to 'Add Event', new_timeline_event_path(@timeline) %>
  </p>
</div>

<div class="actions">
  <%= link_to 'Edit Timeline', edit_timeline_path(@timeline) %> |
  <%= link_to timelines_path, class: 'icon-link' do %>
    <i class="fas fa-arrow-left"></i> Back to Timelines
  <% end %>
</div>
